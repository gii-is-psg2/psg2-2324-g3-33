"use strict";var React=require("react"),reactRouterDom=require("react-router-dom"),reactDom=require("react-dom"),buffer=require("buffer"),__assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign.apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?s(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,o)}u((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var jsxRuntime={exports:{}},reactJsxRuntime_development={},hasRequiredReactJsxRuntime_development;function requireReactJsxRuntime_development(){return hasRequiredReactJsxRuntime_development||(hasRequiredReactJsxRuntime_development=1,"production"!==process.env.NODE_ENV&&function(){var e=React,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),d=Symbol.iterator,f="@@iterator";var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function j(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];!function(e,t,n){var r=_.ReactDebugCurrentFrame,s=r.getStackAddendum();""!==s&&(t+="%s",n=n.concat([s]));var i=n.map((function(e){return String(e)}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}("error",e,n)}var g,h=!1,v=!1,R=!1,E=!1,b=!1;function y(e){return e.displayName||"Context"}function N(e){if(null==e)return null;if("number"==typeof e.tag&&j("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case r:return"Fragment";case n:return"Portal";case i:return"Profiler";case s:return"StrictMode";case l:return"Suspense";case c:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case o:return y(e)+".Consumer";case a:return y(e._context)+".Provider";case u:return function(e,t,n){var r=e.displayName;if(r)return r;var s=t.displayName||t.name||"";return""!==s?n+"("+s+")":n}(e,e.render,"ForwardRef");case p:var t=e.displayName||null;return null!==t?t:N(e.type)||"Memo";case x:var m=e,d=m._payload,f=m._init;try{return N(f(d))}catch(e){return null}}return null}g=Symbol.for("react.module.reference");var C,w,k,T,S,O,P,F=Object.assign,A=0;function I(){}I.__reactDisabledLog=!0;var D,L=_.ReactCurrentDispatcher;function V(e,t,n){if(void 0===D)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return"\n"+D+e}var B,U=!1,M="function"==typeof WeakMap?WeakMap:Map;function $(e,t){if(!e||U)return"";var n,r=B.get(e);if(void 0!==r)return r;U=!0;var s,i=Error.prepareStackTrace;Error.prepareStackTrace=void 0,s=L.current,L.current=null,function(){if(0===A){C=console.log,w=console.info,k=console.warn,T=console.error,S=console.group,O=console.groupCollapsed,P=console.groupEnd;var e={configurable:!0,enumerable:!0,value:I,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}A++}();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),u=n.stack.split("\n"),l=o.length-1,c=u.length-1;l>=1&&c>=0&&o[l]!==u[c];)c--;for(;l>=1&&c>=0;l--,c--)if(o[l]!==u[c]){if(1!==l||1!==c)do{if(l--,--c<0||o[l]!==u[c]){var p="\n"+o[l].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),"function"==typeof e&&B.set(e,p),p}}while(l>=1&&c>=0);break}}}finally{U=!1,L.current=s,function(){if(0==--A){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:F({},e,{value:C}),info:F({},e,{value:w}),warn:F({},e,{value:k}),error:F({},e,{value:T}),group:F({},e,{value:S}),groupCollapsed:F({},e,{value:O}),groupEnd:F({},e,{value:P})})}A<0&&j("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=i}var x=e?e.displayName||e.name:"",m=x?V(x):"";return"function"==typeof e&&B.set(e,m),m}function z(e,t,n){if(null==e)return"";if("function"==typeof e)return $(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return V(e);switch(e){case l:return V("Suspense");case c:return V("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case u:return $(e.render,!1);case p:return z(e.type,t,n);case x:var s=e,i=s._payload,a=s._init;try{return z(a(i),t,n)}catch(e){}}return""}B=new M;var J=Object.prototype.hasOwnProperty,q={},W=_.ReactDebugCurrentFrame;function H(e){if(e){var t=e._owner,n=z(e.type,e._source,t?t.type:null);W.setExtraStackFrame(n)}else W.setExtraStackFrame(null)}var X=Array.isArray;function Y(e){return X(e)}function G(e){return""+e}function Z(e){if(function(e){try{return G(e),!1}catch(e){return!0}}(e))return j("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),G(e)}var Q,K,ee,te=_.ReactCurrentOwner,ne={key:!0,ref:!0,__self:!0,__source:!0};ee={};var re=function(e,n,r,s,i,a,o){var u={$$typeof:t,type:e,key:n,ref:r,props:o,_owner:a,_store:{}};return Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function se(e,t,n,r,s){var i,a={},o=null,u=null;for(i in void 0!==n&&(Z(n),o=""+n),function(e){if(J.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(Z(t.key),o=""+t.key),function(e){if(J.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(u=t.ref,function(e,t){if("string"==typeof e.ref&&te.current&&t&&te.current.stateNode!==t){var n=N(te.current.type);ee[n]||(j('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',N(te.current.type),e.ref),ee[n]=!0)}}(t,s)),t)J.call(t,i)&&!ne.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps){var l=e.defaultProps;for(i in l)void 0===a[i]&&(a[i]=l[i])}if(o||u){var c="function"==typeof e?e.displayName||e.name||"Unknown":e;o&&function(e,t){var n=function(){Q||(Q=!0,j("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(a,c),u&&function(e,t){var n=function(){K||(K=!0,j("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(a,c)}return re(e,o,u,s,r,te.current,a)}var ie,ae=_.ReactCurrentOwner,oe=_.ReactDebugCurrentFrame;function ue(e){if(e){var t=e._owner,n=z(e.type,e._source,t?t.type:null);oe.setExtraStackFrame(n)}else oe.setExtraStackFrame(null)}function le(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}function ce(){if(ae.current){var e=N(ae.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ie=!1;var pe={};function xe(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ce();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!pe[n]){pe[n]=!0;var r="";e&&e._owner&&e._owner!==ae.current&&(r=" It was passed a child from "+N(e._owner.type)+"."),ue(e),j('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),ue(null)}}}function me(e,t){if("object"==typeof e)if(Y(e))for(var n=0;n<e.length;n++){var r=e[n];le(r)&&xe(r,t)}else if(le(e))e._store&&(e._store.validated=!0);else if(e){var s=function(e){if(null===e||"object"!=typeof e)return null;var t=d&&e[d]||e[f];return"function"==typeof t?t:null}(e);if("function"==typeof s&&s!==e.entries)for(var i,a=s.call(e);!(i=a.next()).done;)le(i.value)&&xe(i.value,t)}}function de(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==u&&n.$$typeof!==p)return;t=n.propTypes}if(t){var r=N(n);!function(e,t,n,r,s){var i=Function.call.bind(J);for(var a in e)if(i(e,a)){var o=void 0;try{if("function"!=typeof e[a]){var u=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw u.name="Invariant Violation",u}o=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){o=e}!o||o instanceof Error||(H(s),j("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof o),H(null)),o instanceof Error&&!(o.message in q)&&(q[o.message]=!0,H(s),j("Failed %s type: %s",n,o.message),H(null))}}(t,e.props,"prop",r,e)}else if(void 0!==n.PropTypes&&!ie){ie=!0,j("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",N(n)||"Unknown")}"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||j("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function fe(e,n,d,f,_,y){var C=function(e){return"string"==typeof e||"function"==typeof e||!!(e===r||e===i||b||e===s||e===l||e===c||E||e===m||h||v||R)||"object"==typeof e&&null!==e&&(e.$$typeof===x||e.$$typeof===p||e.$$typeof===a||e.$$typeof===o||e.$$typeof===u||e.$$typeof===g||void 0!==e.getModuleId)}(e);if(!C){var w="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(w+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var k,T=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(_);w+=T||ce(),null===e?k="null":Y(e)?k="array":void 0!==e&&e.$$typeof===t?(k="<"+(N(e.type)||"Unknown")+" />",w=" Did you accidentally export a JSX literal instead of a component?"):k=typeof e,j("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",k,w)}var S=se(e,n,d,_,y);if(null==S)return S;if(C){var O=n.children;if(void 0!==O)if(f)if(Y(O)){for(var P=0;P<O.length;P++)me(O[P],e);Object.freeze&&Object.freeze(O)}else j("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else me(O,e)}return e===r?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){ue(e),j("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),ue(null);break}}null!==e.ref&&(ue(e),j("Invalid attribute `ref` supplied to `React.Fragment`."),ue(null))}(S):de(S),S}var _e=function(e,t,n){return fe(e,t,n,!1)},je=function(e,t,n){return fe(e,t,n,!0)};reactJsxRuntime_development.Fragment=r,reactJsxRuntime_development.jsx=_e,reactJsxRuntime_development.jsxs=je}()),reactJsxRuntime_development}var reactJsxRuntime_production_min={},hasRequiredReactJsxRuntime_production_min;
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=React,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,a){var o,u={},l=null,c=null;for(o in void 0!==a&&(l=""+a),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(c=n.ref),n)r.call(n,o)&&!i.hasOwnProperty(o)&&(u[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===u[o]&&(u[o]=n[o]);return{$$typeof:t,type:e,key:l,ref:c,props:u,_owner:s.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=a,reactJsxRuntime_production_min.jsxs=a,reactJsxRuntime_production_min}"production"===process.env.NODE_ENV?jsxRuntime.exports=requireReactJsxRuntime_production_min():jsxRuntime.exports=requireReactJsxRuntime_development();var jsxRuntimeExports=jsxRuntime.exports;function computeEvaluation(e,t,n){switch(t){case"":return"";case"<":case"<=":case"==":case">=":case">":case"!=":case"||":case"&&":return"".concat(e," ").concat(t," ").concat(n);case"None":return e}}function computeType(e){switch(typeof e){case"string":default:return"TEXT";case"number":return"NUMERIC";case"boolean":return"CONDITION"}}function parseAttributeExpressionToUserAttributes(e){return e.map((function(e){var t,n=parseExpression(e.expression);return{type:e.type,id:null!==(t=n.userContext)&&void 0!==t?t:""}}))}function parseExpression(e){var t=e.trim().split(" ").map((function(e){return parseToken(e)})),n={operator:"",planContext:""};return t.map((function(e){switch(e.type){case"PlanContext":n.planContext=e.value;break;case"UserContext":n.userContext=e.value;break;case"CustomValue":n.customValue=e.value;break;case"Operator":n.operator=e.value}})),n}function parseToken(e){var t=Array.from(e.matchAll(/userContext\['(\w+)'\]/gm)),n=Array.from(e.matchAll(/planContext\['(\w+)'\]/gm));return"<"===e?{type:"Operator",value:"<"}:"<="===e?{type:"Operator",value:"<="}:"=="===e?{type:"Operator",value:"=="}:">="===e?{type:"Operator",value:">="}:">"===e?{type:"Operator",value:">"}:"!="===e?{type:"Operator",value:"!="}:"&&"===e?{type:"Operator",value:"&&"}:"||"===e?{type:"Operator",value:"||"}:"None"===e?{type:"Operator",value:"None"}:""===e?{type:"Noop",value:""}:0===t.length&&n.length>0?{type:"PlanContext",value:n[0][1]}:t.length>0&&0===n.length?{type:"UserContext",value:t[0][1]}:0===t.length&&0===n.length?{type:"CustomValue",value:e}:{type:"Unknown",value:""}}function buildRawPricingContext(e,t){return{features:attributesToRawAttributes(e),plans:plansToRawPlans(t)}}function attributesToRawAttributes(e){return Object.fromEntries(e.map((function(e){var t={description:e.description,expression:e.expression,type:e.type,defaultValue:e.defaultValue};return[e.id,t]})))}function plansToRawPlans(e){return Object.fromEntries(e.map((function(e){var t={description:e.description,price:e.price,currency:e.currency,features:featuresToRawFeatures(e.features)};return[e.name,t]})))}function featuresToRawFeatures(e){return Object.fromEntries(e.map((function(e){return[e.name,{value:e.value}]})))}function rawFeatureAttributesToAttributes(e){return Object.entries(e).map((function(e){var t=e[0],n=e[1];return{id:t,description:n.description,expression:n.expression,type:n.type,defaultValue:n.defaultValue}}))}function rawPlansToPlans(e){return Object.entries(e).map((function(e){var t=e[0],n=e[1];return{name:t,description:n.description,price:n.price,currency:n.currency,features:rawFeaturesToFeatures(n.features)}}))}function rawFeaturesToFeatures(e){return Object.entries(e).map((function(e){var t=e[0],n=e[1];return{name:t,type:computeType(n.value),value:n.value}}))}var EditorContext=React.createContext({theme:"blue",returnTo:"/",attributes:[],setAttributes:function(){return null},userContextAttributes:[],setUserContextAttributes:function(){return null},plans:[],setPlans:function(){return null}});function EditorContextProvider(e){var t=e.pricingContext,n=e.theme,r=e.returnTo,s=e.children,i=n||"blue",a=r||"/",o=t.features?rawFeatureAttributesToAttributes(t.features):[],u=t.plans?rawPlansToPlans(t.plans):[],l=parseAttributeExpressionToUserAttributes(o).filter((function(e){return""!==e.id})),c=React.useState(o),p=c[0],x=c[1],m=React.useState(l),d=m[0],f=m[1],_=React.useState(u),j=_[0],g=_[1];return jsxRuntimeExports.jsx(EditorContext.Provider,__assign({value:{attributes:p,setAttributes:x,userContextAttributes:d,setUserContextAttributes:f,plans:j,setPlans:g,theme:i,returnTo:a}},{children:s}))}function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var css_248z$8=".pp-btn{background-color:#6495ed;border-radius:15px;color:#fff;cursor:pointer;padding:.25rem 3rem}";function Button(e){var t=e.children,n=e.className,r=__rest(e,["children","className"]);return jsxRuntimeExports.jsx("button",__assign({className:n},r,{children:t}))}styleInject(css_248z$8);var List=function(){return jsxRuntimeExports.jsx("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-list",viewBox:"0 0 16 16"},{children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})}))},Trash=function(){return jsxRuntimeExports.jsx("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash3-fill",viewBox:"0 0 16 16"},{children:jsxRuntimeExports.jsx("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"})}))},Pencil=function(){return jsxRuntimeExports.jsxs("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil-square",viewBox:"0 0 16 16"},{children:[jsxRuntimeExports.jsx("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]}))},Plus=function(){return jsxRuntimeExports.jsx("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-plus",viewBox:"0 0 16 16"},{children:jsxRuntimeExports.jsx("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})}))},X=function(){return jsxRuntimeExports.jsx("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x",viewBox:"0 0 16 16"},{children:jsxRuntimeExports.jsx("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})}))},ArrowLeft=function(){return jsxRuntimeExports.jsx("svg",__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16"},{children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}))},css_248z$7=".pp-toggle{border:2px solid #000;border-radius:15px;cursor:pointer;height:30px;width:30px}";function Toggle(e){var t=e.className,n=e.isHidden,r=e.onClick;return jsxRuntimeExports.jsx(Button,__assign({className:t,onClick:r},{children:n?jsxRuntimeExports.jsx(List,{}):jsxRuntimeExports.jsx(X,{})}))}styleInject(css_248z$7);var css_248z$6=".pp-nav{border-right:1px solid #000;flex:1;padding:1rem;position:relative}.pp-nav .pp-btn{bottom:2rem;height:35px;left:50%;position:absolute;text-align:center;transform:translateX(-50%)}.pp-logo{display:block}.pp-nav-items{cursor:pointer;font-size:24px;list-style-type:none;padding-right:1rem;text-align:right;width:100%}.pp-link{color:#000;display:block;text-decoration:none}.pp-link:hover{background-color:#d1d3f4}.pp-link.--is-active{font-weight:700;padding:1rem 0}";function NavBar(e){var t=e.hidden,n=e.onSave,r=React.useContext(EditorContext),s=r.attributes,i=r.plans,a=r.returnTo,o=buildRawPricingContext(s,i),u=function(e){var t=e.isActive;return e.isPending?"pp-link --is-pending":t?"pp-link --is-active":"pp-link"};return jsxRuntimeExports.jsxs("nav",__assign({className:"pp-nav",hidden:t},{children:[jsxRuntimeExports.jsx("img",{className:"pp-logo",src:"https://placehold.co/200x100?text=pricingplans-react"}),jsxRuntimeExports.jsxs("ul",__assign({className:"pp-nav-items"},{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.NavLink,__assign({className:u,to:"attributes"},{children:"Attributes"}))}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.NavLink,__assign({className:u,to:"user-context"},{children:"User Context"}))}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.NavLink,__assign({className:u,to:"plans"},{children:"Pricing plans"}))}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.NavLink,__assign({className:u,to:"evaluation"},{children:"Evaluation"}))}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.NavLink,__assign({className:u,to:a},{children:"Return to page"}))})]})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return n(o)}},{children:"Save"}))]}))}styleInject(css_248z$6);var css_248z$5=".pp-form{align-items:center;display:flex;flex-direction:column;justify-items:center}.pp-form__group{margin-bottom:1rem;max-width:300px;padding:20px 0 0;position:relative}.pp-form__field{background:transparent;border:none;border-bottom:2px solid #9b9b9b;color:var(--dark-grey);font-size:17px;outline:0;padding:7px 0;transition:border-color .2s;width:100%}.pp-form__field::placeholder{color:transparent}.pp-form__field:placeholder-shown~.pp-form__label{cursor:text;font-size:17px;top:20px}.pp-form__label{color:#9b9b9b;display:block;font-size:17px;pointer-events:none;position:absolute;top:0;transition:.2s}.pp-form__field:focus{border-image:var(--purple);border-width:3px;font-weight:700;padding-bottom:6px}.pp-form__field:focus~.pp-form__label{color:#38caef;display:block;font-size:17px;font-weight:700;position:absolute;top:0;transition:.2s}.pp-form__field:invalid,.pp-form__field:required{box-shadow:none}.pp-form__errors{color:#ff5252;margin-top:.5rem}";styleInject(css_248z$5);var css_248z$4="*{margin:0;padding:0}:root{--primary-color:#f0f0f0;--secondary-color:#fff;--gold:#d6b91b;--red:#e34444;--purple:#a324c1;--green:#34c93f;--dark-grey:#707070}.pp-editor{display:flex;height:100vh}.pp-content{background-color:var(--primary-color);flex:3}.pp-content__toggle{margin:1rem 0 1rem 1rem}.pp-content-header{border-bottom:2px solid #707070;margin-bottom:1rem;position:relative}.pp-content-header__btn{border:2px solid #000;border-radius:5px;bottom:.8rem;height:28px;position:absolute;right:.5rem;transition:all .3s ease;width:28px}.pp-content-header__btn:hover{background-color:#d8d8d8;transition:all .3s ease}.pp-content__main{margin:0 4rem}.pp-table{table-layout:fixed;text-align:center;width:100%}.pp-table-actions{display:flex;gap:2rem;justify-content:center}.pp-table__body{color:var(--dark-grey);font-weight:700}.pp-table-type__TEXT{color:var(--red)}.pp-table-type__NUMERIC{color:var(--gold)}.pp-table-type__CONDITION{color:var(--purple)}.bi.bi-list,.bi.bi-plus,.bi.bi-x{height:24px;width:24px}";function PricingPlansEditor(e){var t=e.theme,n=e.pricingContext,r=e.returnTo,s=e.onSave,i=React.useState(!1),a=i[0],o=i[1];return jsxRuntimeExports.jsx(EditorContextProvider,__assign({pricingContext:n,theme:t,returnTo:r},{children:jsxRuntimeExports.jsxs("div",__assign({className:"pp-editor"},{children:[jsxRuntimeExports.jsx(NavBar,{hidden:a,onSave:s}),jsxRuntimeExports.jsxs("main",__assign({className:"pp-content"},{children:[jsxRuntimeExports.jsx(Toggle,{className:"pp-toggle pp-content__toggle",isHidden:a,onClick:function(){o(!a)}}),jsxRuntimeExports.jsx(reactRouterDom.Outlet,{})]}))]}))}))}function Table(e){var t=e.className,n=e.labels,r=e.children;return jsxRuntimeExports.jsxs("table",__assign({className:t},{children:[jsxRuntimeExports.jsx(TableHeader,{labels:n}),jsxRuntimeExports.jsx("tbody",__assign({className:"pp-table__body"},{children:r}))]}))}function TableHeader(e){var t=e.labels;return jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{children:t.map((function(e){return jsxRuntimeExports.jsx("th",{children:e},e)}))})})}styleInject(css_248z$4);var css_248z$3=".pp-modal-background{background-color:rgba(0,0,0,.5);height:100vh;left:0;position:fixed;top:0;width:100vw}.pp-modal-content{background-color:var(--secondary-color);border-radius:25px;height:75%;left:50%;padding:1rem;position:absolute;top:50%;transform:translate(-50%,-50%);width:50%}";function Modal(e){var t=e.open,n=e.children,r=document.getElementById("portal");return t?reactDom.createPortal(jsxRuntimeExports.jsx("div",__assign({className:"pp-modal-background"},{children:jsxRuntimeExports.jsx("div",__assign({className:"pp-modal-content"},{children:n}))})),r):null}function DefaultValue(e){var t=e.id,n=e.name,r=e.form,s=e.setForm;switch(r.type){case"TEXT":return jsxRuntimeExports.jsx("input",{id:t,name:n,type:"text",value:r.defaultValue.toString(),onChange:function(e){s(__assign(__assign({},r),{defaultValue:e.target.value}))}});case"NUMERIC":return jsxRuntimeExports.jsx("input",{id:t,name:n,type:"number",value:r.defaultValue.toString(),onChange:function(e){s(__assign(__assign({},r),{defaultValue:e.currentTarget.valueAsNumber}))}});case"CONDITION":return jsxRuntimeExports.jsxs("select",__assign({id:t,name:n,value:r.defaultValue.toString(),onChange:function(e){s(__assign(__assign({},r),{defaultValue:"true"===e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"Choose an option"})),jsxRuntimeExports.jsx("option",__assign({value:"true"},{children:"YES"})),jsxRuntimeExports.jsx("option",__assign({value:"false"},{children:"NO"}))]}))}}function AttributeForm(e){var t=e.initialData,n=e.onSubmit,r=e.onValidation,s=React.useState(t),i=s[0],a=s[1],o=React.useState({nameIsEmpty:!1,defaultValueIsEmpty:!1,duplicatedAttribute:!1}),u=o[0],l=o[1],c=""===i.id,p=""===i.defaultValue,x=Object.values(u).some((function(e){return e})),m=r(i.id);return jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){e.preventDefault(),x||n(i)}},{children:[jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[u.nameIsEmpty||u.duplicatedAttribute&&jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__errors"},{children:[u.nameIsEmpty&&jsxRuntimeExports.jsxs("span",{children:["Attribute name is ",jsxRuntimeExports.jsx("strong",{children:"required"})," "]}),u.duplicatedAttribute&&jsxRuntimeExports.jsxs("span",{children:["Cannot add ",jsxRuntimeExports.jsx("strong",{children:i.id}),". Attribute name is duplicated"]})]})),jsxRuntimeExports.jsx("label",__assign({htmlFor:"name",className:"pp-form__label"},{children:"Name"})),jsxRuntimeExports.jsx("input",{id:"name",name:"name",className:"pp-form__field",value:i.id,onChange:function(e){a(__assign(__assign({},i),{id:e.target.value}))}})]})),jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[jsxRuntimeExports.jsx("label",__assign({htmlFor:"description",className:"pp-form__label"},{children:"Description"})),jsxRuntimeExports.jsx("input",{id:"description",name:"description",className:"pp-form__field",value:i.description,onChange:function(e){return a(__assign(__assign({},i),{description:e.target.value}))}})]})),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",__assign({htmlFor:"type"},{children:"Type"})),jsxRuntimeExports.jsxs("select",__assign({id:"type",name:"type",value:i.type,onChange:function(e){return a(__assign(__assign({},i),{type:e.target.value,defaultValue:""}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:"NUMERIC"},{children:"NUMERIC"})),jsxRuntimeExports.jsx("option",__assign({value:"TEXT"},{children:"TEXT"})),jsxRuntimeExports.jsx("option",__assign({value:"CONDITION"},{children:"CONDITION"}))]}))]}),jsxRuntimeExports.jsxs("div",{children:[x&&jsxRuntimeExports.jsx("div",__assign({className:"pp-form__errors"},{children:u.defaultValueIsEmpty&&jsxRuntimeExports.jsxs("span",{children:["Attribute default value is ",jsxRuntimeExports.jsx("strong",{children:"required"})]})})),jsxRuntimeExports.jsx("label",__assign({htmlFor:"default"},{children:"Default value"})),jsxRuntimeExports.jsx(DefaultValue,{id:"default",name:"default",form:i,setForm:a})]}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return l({nameIsEmpty:c,defaultValueIsEmpty:p,duplicatedAttribute:m})}},{children:"Save"}))]}))}styleInject(css_248z$3);var css_248z$2=".pp-attr-table{table-layout:fixed;text-align:center;width:100%}";styleInject(css_248z$2);var emptyAttribute={id:"",description:"",type:"TEXT",defaultValue:"",expression:""};function AttributesPage(){var e=React.useContext(EditorContext),t=e.plans,n=e.setPlans,r=e.attributes,s=e.setAttributes,i=React.useState(!1),a=i[0],o=i[1],u=React.useState("add"),l=u[0],c=u[1],p=function(){return o(!1)};return jsxRuntimeExports.jsxs("article",__assign({className:"pp-content__main"},{children:[jsxRuntimeExports.jsxs("header",__assign({className:"pp-content-header"},{children:[jsxRuntimeExports.jsx("h1",{children:"Plan's attributes"}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-content-header__btn",onClick:function(){c("add"),o(!0)}},{children:jsxRuntimeExports.jsx(Plus,{})})),jsxRuntimeExports.jsxs(Modal,__assign({open:a&&"add"===l},{children:[jsxRuntimeExports.jsx(AttributeForm,{initialData:emptyAttribute,onSubmit:function(e){s(__spreadArray(__spreadArray([],r,!0),[e],!1)),function(e){var r=t.map((function(t){return __assign(__assign({},t),{features:__spreadArray(__spreadArray([],t.features,!0),[{name:e.id,type:e.type,value:e.defaultValue}],!1)})}));n(r)}(e),p()},onValidation:function(e){return 0!==r.filter((function(t){return t.id===e})).length}}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:p},{children:"Close"}))]}))]})),jsxRuntimeExports.jsx(Table,__assign({className:"pp-table",labels:["Name","Type","Default","Actions"]},{children:jsxRuntimeExports.jsx(AttributeList,{command:l,setCommand:c,isModalVisible:a,setVisible:o})}))]}))}function AttributeList(e){var t=e.isModalVisible,n=e.setVisible,r=e.command,s=e.setCommand,i=React.useContext(EditorContext),a=i.attributes,o=i.setAttributes,u=i.plans,l=i.setPlans,c=React.useState(-1),p=c[0],x=c[1],m=function(e){switch(typeof e){case"string":case"number":return e;case"boolean":return e?"YES":"NO"}},d=function(e){return 0!==a.filter((function(t,n){return n!==p&&t.id===e})).length},f=function(e){var t={name:e.id,type:e.type,value:e.defaultValue},n=u.map((function(e){var n=a[p];return __assign(__assign({},e),{features:e.features.map((function(e){return e.name===n.id?function(e,t){return e.name!==t.name&&e.type===t.type?__assign(__assign({},e),{name:t.name}):e.type!==t.type?t:e}(e,t):e}))})}));l(n)},_=function(e){o((function(t){return t.map((function(t,n){return n===p?e:t}))})),f(e),n(!1)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a.map((function(e,i){return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:e.id}),jsxRuntimeExports.jsx("td",__assign({className:"pp-table-type__".concat(e.type)},{children:e.type})),jsxRuntimeExports.jsx("td",{children:m(e.defaultValue)}),jsxRuntimeExports.jsxs("td",__assign({className:"pp-table-actions"},{children:[jsxRuntimeExports.jsx(Button,__assign({onClick:function(){x(i),n(!0),s("edit")}},{children:jsxRuntimeExports.jsx(Pencil,{})})),jsxRuntimeExports.jsxs(Modal,__assign({open:t&&"edit"===r&&p===i},{children:[jsxRuntimeExports.jsx(AttributeForm,{initialData:e,onSubmit:_,onValidation:d}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return n(!1)}},{children:"Close"}))]})),jsxRuntimeExports.jsx(Button,__assign({onClick:function(){x(i),n(!0),s("delete")}},{children:jsxRuntimeExports.jsx(Trash,{})})),jsxRuntimeExports.jsxs(Modal,__assign({open:t&&"delete"===r&&p===i},{children:[jsxRuntimeExports.jsxs("h2",{children:["Do you want to delete ",e.id,"?"]}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return n(!1)}},{children:"NO"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return t=e.id,o(a.filter((function(e){return e.id!==t}))),l(u.map((function(e){var n=e.features.filter((function(e){return e.name!==t}));return __assign(__assign({},e),{features:n})}))),void n(!1);var t}},{children:"YES"}))]}))]}))]},e.id)}))})}function UserContextForm(e){var t=e.initialData,n=e.onSubmit,r=React.useState(t),s=r[0],i=r[1];return jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){e.preventDefault(),n(s)}},{children:[jsxRuntimeExports.jsx("label",__assign({htmlFor:"name"},{children:"Name"})),jsxRuntimeExports.jsx("input",{id:"name",name:"name",value:s.id,onChange:function(e){i(__assign(__assign({},s),{id:e.target.value}))}}),jsxRuntimeExports.jsx("label",__assign({htmlFor:"type"},{children:"Type"})),jsxRuntimeExports.jsxs("select",__assign({id:"type",name:"type",value:s.type,onChange:function(e){return i(__assign(__assign({},s),{type:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:"NUMERIC"},{children:"NUMERIC"})),jsxRuntimeExports.jsx("option",__assign({value:"TEXT"},{children:"TEXT"})),jsxRuntimeExports.jsx("option",__assign({value:"CONDITION"},{children:"CONDITION"}))]})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn"},{children:"Save"}))]}))}function UserContextPage(e){var t=e.title,n=e.tableHeaders,r=React.useState(!1),s=r[0],i=r[1],a=React.useState("add"),o=a[0],u=a[1],l=React.useState(null),c=l[0],p=l[1],x=function(){u("add"),p(null),i(!0)};return jsxRuntimeExports.jsxs("article",__assign({className:"pp-content__main"},{children:[jsxRuntimeExports.jsxs("header",__assign({className:"pp-content-header"},{children:[jsxRuntimeExports.jsx("h1",{children:t}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-content-header__btn",onClick:function(){return x()}},{children:jsxRuntimeExports.jsx(Plus,{})}))]})),jsxRuntimeExports.jsx(Table,__assign({className:"pp-table",labels:n},{children:jsxRuntimeExports.jsx(UserAttributeList,{setCommand:u,setSelected:p,setVisible:i})})),jsxRuntimeExports.jsx(Modal,__assign({open:s},{children:jsxRuntimeExports.jsx(ModalContent,{command:o,userAtributePosition:c,setVisible:i})}))]}))}function ModalContent(e){var t=e.command,n=e.userAtributePosition,r=e.setVisible,s=React.useContext(EditorContext),i=s.userContextAttributes,a=s.setUserContextAttributes,o=null!==n,u=o?i[n].id:"",l=function(){return r(!1)};switch(t){case"add":case"edit":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UserContextForm,{initialData:o?i[n]:{id:"",type:"TEXT"},onSubmit:o?function(e){var t=i.map((function(t,r){return r===n?e:t}));a(t),l()}:function(e){a(__spreadArray(__spreadArray([],i,!0),[e],!1)),r(!1)}}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:l},{children:"Close"}))]});case"delete":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("h2",{children:["Do you want to delete ",u,"?"]}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:l},{children:"NO"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){var e=i.filter((function(e,t){return t!==n}));a(e),l()}},{children:"YES"}))]})}}function UserAttributeList(e){var t=e.setCommand,n=e.setSelected,r=e.setVisible,s=React.useContext(EditorContext).userContextAttributes;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:s.map((function(e,s){return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:e.id}),jsxRuntimeExports.jsx("td",__assign({className:"pp-table-type__".concat(e.type)},{children:e.type})),jsxRuntimeExports.jsxs("td",__assign({className:"pp-table-actions"},{children:[jsxRuntimeExports.jsx(Button,__assign({onClick:function(){t("edit"),n(s),r(!0)}},{children:jsxRuntimeExports.jsx(Pencil,{})})),jsxRuntimeExports.jsx(Button,__assign({onClick:function(){t("delete"),n(s),r(!0)}},{children:jsxRuntimeExports.jsx(Trash,{})}))]}))]},e.id)}))})}function TextEvaluationForm(e){var t=e.attribute,n=e.onSubmit,r=e.setVisible,s=parseExpression(t.expression),i=React.useState({operator:s.operator,userContextValue:s.userContext,customValue:s.customValue}),a=i[0],o=i[1],u=React.useContext(EditorContext).userContextAttributes.filter((function(e){return"TEXT"===e.type})),l=React.useState(!1),c=l[0],p=l[1];return jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){e.preventDefault();var s="planContext['".concat(t.id,"']"),i=c?"'".concat(a.customValue,"'"):"userContext['".concat(a.userContextValue,"']"),o=computeEvaluation(s,a.operator,i);n(t.id,o),r(!1)}},{children:[jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",__assign({id:"name"},{children:"Name"})),jsxRuntimeExports.jsx("input",{id:"name",value:t.id,readOnly:!0})]})),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",__assign({id:"operator"},{children:"Operator"})),jsxRuntimeExports.jsxs("select",__assign({id:"operator",value:a.operator,onChange:function(e){return o(__assign(__assign({},a),{operator:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"DON'T EVALUATE"})),jsxRuntimeExports.jsx("option",__assign({value:"=="},{children:"EQUALS"})),jsxRuntimeExports.jsx("option",__assign({value:"!="},{children:"DIFFERENT"}))]}))]}),jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",__assign({id:"custom"},{children:"Use custom value"})),jsxRuntimeExports.jsx("input",{id:"custom",type:"checkbox",checked:c,onChange:function(){p(!c)}})]})),jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",{id:"value-to-compare"}),!c&&jsxRuntimeExports.jsxs("select",__assign({id:"value-to-compare",name:"value-to-compare",value:a.userContextValue,onChange:function(e){return o(__assign(__assign({},a),{userContextValue:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"Choose an option"})),u.map((function(e){return jsxRuntimeExports.jsx("option",__assign({value:e.id},{children:e.id}),e.id)}))]})),c&&jsxRuntimeExports.jsx("input",{id:"value-to-compare",name:"value-to-compare",type:"text",value:a.customValue,onChange:function(e){return o(__assign(__assign({},a),{customValue:e.target.value}))}})]})),jsxRuntimeExports.jsx(Button,__assign({type:"button",className:"pp-btn",onClick:function(){return r(!1)}},{children:"Close"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn"},{children:"Save"}))]}))}function NumericEvaluationForm(e){var t=e.attribute,n=e.onSubmit,r=e.setVisible,s=React.useContext(EditorContext).userContextAttributes,i=parseExpression(t.expression),a=s.filter((function(e){return"NUMERIC"==e.type})),o=React.useState({operator:i.operator,valueToCompare:i.userContext}),u=o[0],l=o[1];return jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){e.preventDefault();var s="planContext['".concat(t.id,"']"),i="userContext['".concat(u.valueToCompare,"']"),a=computeEvaluation(s,u.operator,i);n(t.id,a),r(!1)}},{children:[jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",__assign({id:"name"},{children:"Name"})),jsxRuntimeExports.jsx("input",{id:"name",value:t.id,readOnly:!0})]})),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",__assign({id:"operator"},{children:"Operator"})),jsxRuntimeExports.jsxs("select",__assign({id:"operator",value:u.operator,onChange:function(e){return l(__assign(__assign({},u),{operator:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"DON'T EVALUATE"})),jsxRuntimeExports.jsx("option",__assign({value:"<"},{children:"LOWER"})),jsxRuntimeExports.jsx("option",__assign({value:"<="},{children:"LOWER EQUALS"})),jsxRuntimeExports.jsx("option",__assign({value:"=="},{children:"EQUALS"})),jsxRuntimeExports.jsx("option",__assign({value:">="},{children:"GREATER EQUALS"})),jsxRuntimeExports.jsx("option",__assign({value:">"},{children:"GREATER"})),jsxRuntimeExports.jsx("option",__assign({value:"!="},{children:"DIFFERENT"}))]}))]}),jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",{id:"value-to-compare"}),jsxRuntimeExports.jsxs("select",__assign({id:"value-to-compare",name:"value-to-compare",value:u.valueToCompare,onChange:function(e){return l(__assign(__assign({},u),{valueToCompare:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"Choose an option"})),a.map((function(e){return jsxRuntimeExports.jsx("option",__assign({value:e.id},{children:e.id}),e.id)}))]}))]})),jsxRuntimeExports.jsx(Button,__assign({type:"button",className:"pp-btn",onClick:function(){return r(!1)}},{children:"Close"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn"},{children:"Save"}))]}))}var css_248z$1=".pp-attr-table{table-layout:fixed;text-align:center;width:100%}";function ConditionEvaluationForm(e){var t=e.attribute,n=e.onSubmit,r=e.setVisible,s=parseExpression(t.expression),i=React.useState({operator:s.operator,userContextValue:s.userContext}),a=i[0],o=i[1],u=React.useContext(EditorContext).userContextAttributes.filter((function(e){return"CONDITION"===e.type}));console.log(s);return jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){e.preventDefault();var s="planContext['".concat(t.id,"']"),i="userContext['".concat(a.userContextValue,"']"),o=computeEvaluation(s,a.operator,i);n(t.id,o),r(!1)}},{children:[jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",__assign({id:"name"},{children:"Name"})),jsxRuntimeExports.jsx("input",{id:"name",value:t.id,readOnly:!0})]})),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",__assign({id:"operator"},{children:"Operator"})),jsxRuntimeExports.jsxs("select",__assign({id:"operator",value:a.operator,onChange:function(e){return o(__assign(__assign({},a),{operator:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"DON'T EVALUATE"})),jsxRuntimeExports.jsx("option",__assign({value:"&&"},{children:"AND"})),jsxRuntimeExports.jsx("option",__assign({value:"||"},{children:"OR"})),jsxRuntimeExports.jsx("option",__assign({value:"None"},{children:"NONE"}))]}))]}),jsxRuntimeExports.jsxs("div",__assign({className:"pp-field"},{children:[jsxRuntimeExports.jsx("label",{id:"value-to-compare"}),jsxRuntimeExports.jsxs("select",__assign({id:"value-to-compare",name:"value-to-compare",value:a.userContextValue,onChange:function(e){return o(__assign(__assign({},a),{userContextValue:e.target.value}))}},{children:[jsxRuntimeExports.jsx("option",__assign({value:""},{children:"None"})),u.map((function(e){return jsxRuntimeExports.jsx("option",__assign({value:e.id},{children:e.id}),e.id)}))]}))]})),jsxRuntimeExports.jsx(Button,__assign({type:"button",className:"pp-btn",onClick:function(){return r(!1)}},{children:"Close"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn"},{children:"Save"}))]}))}function EvaluationPage(){var e=React.useState(!1),t=e[0],n=e[1],r=React.useState("edit"),s=r[0],i=r[1];return jsxRuntimeExports.jsxs("article",__assign({className:"pp-content__main"},{children:[jsxRuntimeExports.jsx("header",__assign({className:"pp-content-header"},{children:jsxRuntimeExports.jsx("h1",{children:"Evaluation Configuration"})})),jsxRuntimeExports.jsx(Table,__assign({className:"pp-table",labels:["Name","Type","Expression","Actions"]},{children:jsxRuntimeExports.jsx(EvaluationList,{isModalVisible:t,setVisible:n,command:s,setCommand:i})}))]}))}function EvaluationList(e){var t=e.isModalVisible,n=e.setVisible,r=e.command,s=e.setCommand,i=React.useContext(EditorContext),a=i.attributes,o=i.setAttributes,u=React.useState(-1),l=u[0],c=u[1],p=function(e,t){return o(a.map((function(n){var r=__assign(__assign({},n),{expression:t});return n.id===e?r:n})))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a.map((function(e,i){return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:e.id}),jsxRuntimeExports.jsx("td",__assign({className:"pp-table-type__".concat(e.type)},{children:e.type})),jsxRuntimeExports.jsx("td",__assign({className:"expression"},{children:""===e.expression?"NOT EVALUATED":"EVALUATED"})),jsxRuntimeExports.jsxs("td",__assign({className:"pp-table-actions"},{children:[jsxRuntimeExports.jsx(Button,__assign({onClick:function(){s("edit"),n(!0),c(i)}},{children:jsxRuntimeExports.jsx(Pencil,{})})),jsxRuntimeExports.jsx(Modal,__assign({open:t&&"edit"===r&&l===i},{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["TEXT"===e.type&&jsxRuntimeExports.jsx(TextEvaluationForm,{attribute:e,onSubmit:p,setVisible:n}),"NUMERIC"===e.type&&jsxRuntimeExports.jsx(NumericEvaluationForm,{attribute:e,onSubmit:p,setVisible:n}),"CONDITION"===e.type&&jsxRuntimeExports.jsx(ConditionEvaluationForm,{attribute:e,onSubmit:p,setVisible:n})]})})),jsxRuntimeExports.jsx(Button,__assign({onClick:function(){n(!0),s("delete"),c(i)}},{children:jsxRuntimeExports.jsx(Trash,{})})),jsxRuntimeExports.jsxs(Modal,__assign({open:t&&"delete"===r&&l===i},{children:[jsxRuntimeExports.jsxs("h2",{children:["This action will stop evaluating ",e.id,". Are you sure?"]}),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return n(!1)}},{children:"NO"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",onClick:function(){return t=e.id,o(a.map((function(e){return e.id===t?__assign(__assign({},e),{expression:""}):e}))),void n(!1);var t}},{children:"YES"}))]}))]}))]},e.id)}))})}styleInject(css_248z$1);var css_248z=".pp-plan-items{display:flex;gap:1rem;list-style:none;text-decoration:none}.pp-plan-item{color:#000;display:inline-block;text-decoration:none}.pp-plan-card{background-color:#fff;border:1px solid #000;border-radius:1rem;padding:1rem}.pp-link .pp-plan-card:hover{background-color:#e0e0e0}";function Plans(){var e=React.useContext(EditorContext).plans;return jsxRuntimeExports.jsxs("article",__assign({className:"pp-content__main"},{children:[jsxRuntimeExports.jsxs("header",__assign({className:"pp-content-header"},{children:[jsxRuntimeExports.jsx("h1",{children:"Plans"}),jsxRuntimeExports.jsx(reactRouterDom.Link,__assign({className:"pp-content-header__btn",to:"new",state:{index:null}},{children:jsxRuntimeExports.jsx(Plus,{})}))]})),jsxRuntimeExports.jsx("ul",__assign({className:"pp-plan-items"},{children:e.map((function(e,t){return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(reactRouterDom.Link,__assign({className:"pp-plan-item pp-plan-card",to:e.name,state:{index:t}},{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{children:e.name}),jsxRuntimeExports.jsx("h3",{children:"Description"}),jsxRuntimeExports.jsx("p",{children:e.description}),jsxRuntimeExports.jsx("h3",{children:"Price"}),jsxRuntimeExports.jsx("span",{children:e.price})," ",jsxRuntimeExports.jsx("span",{children:e.currency})]})}))},e.name)}))}))]}))}function Plan(){var e=reactRouterDom.useLocation().state,t=e.index,n=null!==t,r=reactRouterDom.useNavigate(),s=function(){return r("..")},i=React.useContext(EditorContext),a=i.attributes,o=i.plans,u=i.setPlans,l=n?o[t].features:a.map((function(e){return{name:e.id,type:computeType(e.defaultValue),value:e.defaultValue}})),c=n?{name:o[e.index].name,description:o[e.index].description,price:o[e.index].price.toString(),currency:o[e.index].currency}:{name:"",description:"",price:"",currency:""},p=React.useState(c),x=p[0],m=p[1],d=React.useState(l),f=d[0],_=d[1],j=""===x.name,g=x.name.trim().split(" ").length>1,h=/^\d+.?\d{0,2}?$/.test(x.price),v=function(e){var t;return m(__assign(__assign({},x),((t={})[e.target.name]=e.target.value,t)))};return jsxRuntimeExports.jsxs("article",__assign({className:"pp-content__main"},{children:[jsxRuntimeExports.jsxs("header",__assign({className:"pp-content-header"},{children:[jsxRuntimeExports.jsx(Button,__assign({onClick:s},{children:jsxRuntimeExports.jsx(ArrowLeft,{})})),jsxRuntimeExports.jsx("h1",{children:n?o[t].name:"New Plan"})]})),jsxRuntimeExports.jsxs("form",__assign({className:"pp-form",onSubmit:function(e){var r,i;e.preventDefault(),n?(r=t,i=o.map((function(e,t){return t===r?__assign(__assign({},x),{price:Number(x.price),features:f}):e})),u(i)):u(__spreadArray(__spreadArray([],o,!0),[__assign(__assign({},x),{price:Number(x.price),features:f})],!1)),s()}},{children:[jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[j&&jsxRuntimeExports.jsx("small",{children:"Plan name is required"}),g&&jsxRuntimeExports.jsx("small",{children:"Compound plan names are not allowed. Use only one word"}),jsxRuntimeExports.jsx("label",__assign({htmlFor:"name",className:"pp-form__label"},{children:"Plan name"})),jsxRuntimeExports.jsx("input",{id:"name",name:"name",className:"pp-form__field",value:x.name,onChange:v})]})),jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[jsxRuntimeExports.jsx("label",__assign({htmlFor:"description",className:"pp-form__label"},{children:"Description"})),jsxRuntimeExports.jsx("input",{id:"description",name:"description",className:"pp-form__field",value:x.description,onChange:v})]})),jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[!h&&jsxRuntimeExports.jsx("small",{children:"Invalid price. Plan has to be zero or positive and contain a dot"}),jsxRuntimeExports.jsx("label",__assign({htmlFor:"price",className:"pp-form__label"},{children:"Price"})),jsxRuntimeExports.jsx("input",{id:"price",name:"price",type:"number",className:"pp-form__field",value:x.price,onChange:v})]})),jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[jsxRuntimeExports.jsx("label",__assign({htmlFor:"currency",className:"pp-form__label"},{children:"Currency"})),jsxRuntimeExports.jsx("input",{id:"currency",name:"currency",className:"pp-form__field",value:x.currency,onChange:v})]})),jsxRuntimeExports.jsx(FeatureList,{features:f,setFeatures:_}),jsxRuntimeExports.jsxs("footer",__assign({className:"pp-plan-actions"},{children:[n&&jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn",style:{backgroundColor:"red"},type:"button",onClick:function(){u(o.filter((function(t,n){return n!==e.index}))),s()}},{children:"Delete plan"})),jsxRuntimeExports.jsx(Button,__assign({className:"pp-btn"},{children:n?"Save changes":"Add plan"}))]}))]}))]}))}function FeatureList(e){var t=e.features,n=e.setFeatures,r=function(e){return n(t.map((function(t){return t.name===e.target.name?__assign(__assign({},t),{value:e.target.value}):t})))},s=function(e){return n(t.map((function(t){return t.name===e.target.name?__assign(__assign({},t),{value:e.currentTarget.valueAsNumber}):t})))},i=function(e){console.log(e.target.checked),n(t.map((function(t){return t.name===e.target.name?__assign(__assign({},t),{value:e.target.checked}):t})))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t.map((function(e){switch(e.type){case"TEXT":return jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[jsxRuntimeExports.jsx("label",__assign({className:"pp-form__label"},{children:e.name})),jsxRuntimeExports.jsx("input",{className:"pp-form__field",type:"text",id:e.name,name:e.name,value:e.value.toString(),onChange:r})]}),e.name);case"NUMERIC":return jsxRuntimeExports.jsxs("div",__assign({className:"pp-form__group"},{children:[jsxRuntimeExports.jsx("label",__assign({className:"pp-form__label"},{children:e.name})),jsxRuntimeExports.jsx("input",{className:"pp-form__field",type:"number",id:e.name,name:e.name,value:e.value.toString(),onChange:s})]}),e.name);case"CONDITION":return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:e.name}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:e.name,name:e.name,checked:e.value,onChange:i})]},e.name)}}))})}function PricingConfigurationRoutes(e){var t=e.pricingContext,n=e.returnTo,r=e.theme,s=e.onSave;return jsxRuntimeExports.jsx(reactRouterDom.Routes,{children:jsxRuntimeExports.jsxs(reactRouterDom.Route,__assign({element:jsxRuntimeExports.jsx(PricingPlansEditor,{theme:r,pricingContext:t,returnTo:n,onSave:s})},{children:[jsxRuntimeExports.jsx(reactRouterDom.Route,{path:"/",element:jsxRuntimeExports.jsx("h1",{children:"Pricingplans-react"})}),jsxRuntimeExports.jsx(reactRouterDom.Route,{path:"attributes",element:jsxRuntimeExports.jsx(AttributesPage,{})}),jsxRuntimeExports.jsx(reactRouterDom.Route,{path:"user-context",element:jsxRuntimeExports.jsx(UserContextPage,{title:"User context",tableHeaders:["Name","Type","Actions"]})}),jsxRuntimeExports.jsxs(reactRouterDom.Route,__assign({path:"plans",element:jsxRuntimeExports.jsx(reactRouterDom.Outlet,{})},{children:[jsxRuntimeExports.jsx(reactRouterDom.Route,{index:!0,element:jsxRuntimeExports.jsx(Plans,{})}),jsxRuntimeExports.jsx(reactRouterDom.Route,{path:":planId",element:jsxRuntimeExports.jsx(Plan,{})})]})),jsxRuntimeExports.jsx(reactRouterDom.Route,{path:"evaluation",element:jsxRuntimeExports.jsx(EvaluationPage,{})})]}))})}function useGenericFeature(e){var t,n,r,s,i,a=React.useState(!1),o=a[0],u=a[1],l=React.useState(!0),c=l[0],p=l[1],x=React.useState(),m=x[0],d=x[1];if(!e.on)throw new Error("On Expression list must be provided");return React.useEffect((function(){if(e.on){p(!0);var t=e.on.map((function(e){return e.expression.eval()}));if(0===t.length)return p(!1),void d(void 0);Promise.all(t).then((function(e){e.forEach((function(e){e.isError&&console.warn("Error evaluating feature",e.errorMessage)}));var t=e.some((function(e){return e.isError}));if(t)return u(!0),void p(!1);var n=e.findIndex((function(e){return!0===e.value}));d(-1!==n?n:void 0),p(!1)}))}else u(!0),p(!1)}),[e.key]),i=o?null!==(t=e.error)&&void 0!==t?t:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):c?null!==(n=e.loading)&&void 0!==n?n:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):void 0!==m?null!==(r=e.on[m].on)&&void 0!==r?r:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):null!==(s=e.default)&&void 0!==s?s:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i})}function error(e){return{isError:!0,errorMessage:e}}function value(e){return{value:e,isError:!1}}function parseJwt(e){return JSON.parse(buffer.Buffer.from(e.split(".")[1],"base64").toString())}styleInject(css_248z);var TokenService=function(){function e(){}return e.prototype.getLocalRefreshToken=function(){var e=JSON.parse(localStorage.getItem("user"));return null==e?void 0:e.refreshToken},e.prototype.getLocalPricingToken=function(){var e=JSON.parse(localStorage.getItem("pricingToken"));return e||null},e.prototype.getFromToken=function(e){var t=JSON.parse(localStorage.getItem("pricingToken"));return t?parseJwt(t)[e]:null},e.prototype.updateLocalPricingToken=function(e){window.localStorage.setItem("pricingToken",JSON.stringify(e))},e.prototype.getUser=function(){return JSON.parse(localStorage.getItem("user"))},e.prototype.setUser=function(e){window.localStorage.setItem("user",JSON.stringify(e))},e.prototype.removeUser=function(){window.localStorage.removeItem("user"),window.localStorage.removeItem("pricingToken")},e.prototype.updateJWTToken=function(){var e=this;return new Promise((function(t,n){fetch("/api/v1/auth/refreshToken",{method:"POST",headers:{Authorization:"Bearer ".concat(e.getLocalPricingToken()),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){console.log(n),e.updateLocalPricingToken(n.newToken),t()})).catch((function(e){n(e)}))}))},e}(),tokenService=new TokenService,Feature$1=function(){function Feature(e){this.featureId=e}return Feature.prototype.eval=function(){return __awaiter(this,void 0,void 0,(function(){var retriever,feature_1,userContext,planContext,result;return __generator(this,(function(_a){if(retriever=tokenService.getFromToken("features"),!retriever)return[2,error("Error evaluating Feature "+this.featureId+". No FeatureRetriever provided")];try{if(feature_1=retriever[this.featureId],"boolean"==typeof feature_1.eval)return[2,value(feature_1.eval)];if("string"!=typeof feature_1.eval)return[2,error("Error evaluating Feature "+this.featureId+". It was not a boolean. Recv value: "+feature_1.eval)];userContext=tokenService.getFromToken("userContext"),planContext=tokenService.getFromToken("planContext");try{return result=eval("".concat(feature_1.eval)),[2,value(result)]}catch(e){return[2,error("Error evaluating Feature "+this.featureId+". The expression is not valid, it throws an exception or returns a non boolean value.")]}}catch(e){return[2,error("Error evaluating Feature: "+this.featureId+" Retrieval error")]}return[2]}))}))},Feature.prototype.equals=function(e){return e instanceof Feature&&this.featureId===e.featureId},Feature}();function feature(e){return new Feature$1(e)}var Constant=function(){function e(e){this.value=e}return e.prototype.eval=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,value(this.value)]}))}))},e.prototype.equals=function(t){return t instanceof e&&this.value===t.value},e}(),BinaryLogicalOperator;function constant(e){return new Constant(e)}function booleanFunction(e,t,n){return n("boolean"==typeof e?constant(e):e,"boolean"==typeof t?constant(t):t)}!function(e){e[e.AND=0]="AND",e[e.OR=1]="OR",e[e.IFF=2]="IFF",e[e.IMPLIES=3]="IMPLIES"}(BinaryLogicalOperator||(BinaryLogicalOperator={}));var BinaryLogicalPredicate=function(){function e(e,t,n){this.left=e,this.right=t,this.op=n}return e.prototype.eval=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,r,s;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.left.eval()];case 1:return e=i.sent(),[4,this.right.eval()];case 2:if(t=i.sent(),e.isError||t.isError)return[2,error("Error evaluating Boolean Expression: "+e.errorMessage+" "+t.errorMessage)];switch(n=e.value,r=t.value,this.op){case BinaryLogicalOperator.AND:s=n&&r;break;case BinaryLogicalOperator.OR:s=n||r;break;case BinaryLogicalOperator.IFF:s=n===r;break;case BinaryLogicalOperator.IMPLIES:s=!n||r}return void 0===s?[2,error("Error evaluating Boolean Expression: Invalid Operator "+this.op)]:[2,value(s)]}}))}))},e.prototype.equals=function(t){return t instanceof e&&(this.left.equals(t.left)&&this.right.equals(t.right)&&this.op===t.op)},e}();function and(e,t){return booleanFunction(e,t,(function(e,t){return new BinaryLogicalPredicate(e,t,BinaryLogicalOperator.AND)}))}function or(e,t){return booleanFunction(e,t,(function(e,t){return new BinaryLogicalPredicate(e,t,BinaryLogicalOperator.OR)}))}function implies(e,t){return booleanFunction(e,t,(function(e,t){return new BinaryLogicalPredicate(e,t,BinaryLogicalOperator.IMPLIES)}))}function iff(e,t){return booleanFunction(e,t,(function(e,t){return new BinaryLogicalPredicate(e,t,BinaryLogicalOperator.IFF)}))}function On(e){var t=e.children;return e.expression,jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t})}function Default(e){var t=e.children;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t})}function Loading(e){var t=e.children;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t})}function ErrorFallback(e){var t=e.children;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t})}function Feature(e){var t=e.children,n=e.expression,r=React.useState(0),s=r[0],i=r[1],a=React.useState([]),o=a[0],u=a[1],l=React.useState([]),c=l[0],p=l[1],x=React.useState([]),m=x[0],d=x[1],f=React.useState([]),_=f[0],j=f[1],g=React.useMemo((function(){return o.map((function(e){var t=void 0!==e.props.expression?e.props.expression:n;return{on:e.props.children,expression:t}}))}),[o]);React.useEffect((function(){i(s+1);var e=React.Children.toArray(t).filter((function(e){return e.type===On}));u(e);var n=React.Children.toArray(t).filter((function(e){return e.type===Default}));p(n);var r=React.Children.toArray(t).filter((function(e){return e.type===Loading}));d(r);var a=React.Children.toArray(t).filter((function(e){return e.type===ErrorFallback}));j(a)}),[t]);var h=useGenericFeature({key:s.toString(),on:g,default:c,loading:m,error:_});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:h})}function fetchWithPricingInterceptor(e,t){return fetch("http://localhost:8080"+e,__assign(__assign({},t),{headers:__assign(__assign({},t.headers),{"Pricing-Token":tokenService.getLocalPricingToken()})})).then((function(e){var t=e.headers.get("Pricing-Token");return null!==t&&t!==tokenService.getLocalPricingToken()&&(tokenService.updateLocalPricingToken(t),window.location.reload()),e}))}function searchNewTokenAndUpdate(e){var t=e.headers.get("Pricing-Token");null!==t&&t!==tokenService.getLocalPricingToken()&&(tokenService.updateLocalPricingToken(t),window.location.reload())}exports.Default=Default,exports.ErrorFallback=ErrorFallback,exports.Feature=Feature,exports.Loading=Loading,exports.On=On,exports.PricingConfigurationRoutes=PricingConfigurationRoutes,exports.and=and,exports.feature=feature,exports.fetchWithPricingInterceptor=fetchWithPricingInterceptor,exports.iff=iff,exports.implies=implies,exports.or=or,exports.searchNewTokenAndUpdate=searchNewTokenAndUpdate,exports.useGenericFeature=useGenericFeature;
